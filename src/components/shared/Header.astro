---
import Logo from "../../assets/logo.svg";
import type { Lang, LandingDict } from "../../i18n";
import ThemeToggle from "./ThemeToggle.astro";
import LanguageToggle from "./LanguageToggle.astro";
import MobileMenuOverlay from "./MobileMenuOverlay.astro";
import MobileMenuToggle from "./MobileMenuToggle.astro";

interface Props {
  lang: Lang;
  t: LandingDict;
  otherLangHref: string;
}

const { lang, t, otherLangHref } = Astro.props;
---

<header class="border-border/60 sticky top-0 z-30 border-b md:overflow-visible">
  <a
    href="#main-content"
    class="bg-foreground text-background focus-visible:ring-ring sr-only focus-visible:not-sr-only focus-visible:absolute focus-visible:left-6 focus-visible:top-4 focus-visible:z-50 focus-visible:rounded-full focus-visible:px-4 focus-visible:py-2 focus-visible:text-xs focus-visible:ring-2"
  >
    {t.nav.skipToContent}
  </a>
  <div
    class="bg-background/50 container flex items-center justify-between gap-4 py-4 backdrop-blur-xl"
  >
    <a
      href={lang === "ua" ? "/ua/" : "/"}
      class="flex shrink-0 items-center gap-2"
    >
      <Logo
        aria-label="SubEye logo"
        class="h-auto w-10 transition-transform duration-300 ease-in-out will-change-transform hover:scale-110"
      />
      <div class="flex flex-col">
        <span class="hidden text-sm font-semibold tracking-tight md:inline">
          SubEye
        </span>
        <span class="text-muted-foreground hidden text-xs md:inline">
          {t.nav.brandTagline}
        </span>
      </div>
    </a>

    <nav class="hidden items-center gap-8 text-sm md:flex">
      <a
        href="#product"
        class="text-muted-foreground hover:text-foreground transition-colors"
      >
        {t.nav.product}
      </a>
      <a
        href="#pricing"
        class="text-muted-foreground hover:text-foreground transition-colors"
      >
        {t.nav.pricing}
      </a>
      <a
        href="#faq"
        class="text-muted-foreground hover:text-foreground transition-colors"
      >
        {t.nav.faq}
      </a>
    </nav>

    <div class="flex items-center gap-2">
      <LanguageToggle href={otherLangHref} label={t.nav.switchTo} lang={lang} />
      <ThemeToggle />

      <a
        href="https://app.subeye.cc/auth/sign-in"
        class="border-border bg-background/60 text-muted-foreground hover:text-foreground hover:bg-muted/40 hidden items-center justify-center rounded-full border px-4 py-1.5 text-xs font-medium transition-colors md:inline-flex"
      >
        {t.nav.signin}
      </a>
      <a
        href="https://app.subeye.cc/auth/sign-up"
        class="bg-primary text-primary-foreground shadow-primary/40 hover:bg-primary/90 hidden items-center justify-center rounded-full px-4 py-1.5 text-xs font-medium shadow-lg transition-colors sm:px-5 sm:text-sm md:inline-flex"
      >
        {t.nav.signup}
      </a>

      <MobileMenuToggle />
    </div>
  </div>
</header>

<MobileMenuOverlay t={t} />
